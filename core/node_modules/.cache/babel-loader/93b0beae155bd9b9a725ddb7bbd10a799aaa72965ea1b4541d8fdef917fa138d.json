{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'SingleReportView',\n  props: {\n    headline: String,\n    textarea: String\n  },\n  data() {\n    return {\n      contact: {\n        first_name: '',\n        last_name: '',\n        email_address: '',\n        company_name: '',\n        company_type: '',\n        job_title: ''\n      },\n      terms: false,\n      coupon_code: '',\n      honeypot: ''\n    };\n  },\n  methods: {\n    handleSubmission: async function () {\n      if (this.honeypot !== \"\") return;\n      if (!this.contact.first_name || !this.contact.last_name || !this.contact.email_address || !this.contact.company_name || !this.contact.company_type || !this.terms) return;\n      const url = `${this.rest_base}order-submission`;\n      const data = {\n        contact: this.contact,\n        coupon_code: this.coupon_code,\n        cartItems: this.$root.inCart\n      };\n      const headers = {\n        credentials: \"same-origin\",\n        \"Content-Type\": \"application/json\",\n        \"X-WP-Nonce\": this.nonce\n      };\n      fetch(url, {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify(data)\n      }).then(result => result.json()).then(result => {\n        if (result.status === 'success') {\n          this.$root.inCart = [];\n          this.$root.ref = result.order_id;\n          this.$router.push({\n            name: 'thank-you'\n          });\n        }\n        if (result.status === 'error') {\n          alert(result.message);\n        }\n        if (result.status === 'stripe') {\n          window.location.href = result.url;\n        }\n      });\n    }\n  },\n  computed: {\n    formIsNotValid: function () {\n      return this.honeypot !== \"\" || !this.contact.first_name || !this.contact.last_name || !this.contact.email_address || !this.contact.company_name || !this.contact.company_type || !this.terms;\n    }\n  }\n};","map":{"version":3,"names":["name","props","headline","String","textarea","data","contact","first_name","last_name","email_address","company_name","company_type","job_title","terms","coupon_code","honeypot","methods","handleSubmission","url","rest_base","cartItems","$root","inCart","headers","credentials","nonce","fetch","method","body","JSON","stringify","then","result","json","status","ref","order_id","$router","push","alert","message","window","location","href","computed","formIsNotValid"],"sources":["src/components/PurchaseForm.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <form class=\"purchase-form\">\r\n            <h3>{{ headline }}</h3>\r\n            <div v-html=\"textarea\" class=\"intro\"></div>\r\n            <input type=\"hidden\" name=\"required\" v-model=\"honeypot\">\r\n\r\n            <p class=\"nb\"><sup>*</sup> indicates required field</p>\r\n            <div class=\"form-section form-section-1\">\r\n                <label><span>First name <sup>*</sup></span>\r\n                    <input type=\"text\" name=\"first_name\" v-model=\"contact.first_name\" required>\r\n                </label>\r\n                <label><span>Surname <sup>*</sup></span>\r\n                    <input type=\"text\" name=\"last_name\" v-model=\"contact.last_name\" required>\r\n                </label>\r\n                <label><span>Email <sup>*</sup></span>\r\n                    <input type=\"text\" name=\"email_address\" v-model=\"contact.email_address\" required>\r\n                </label>\r\n                <button type=\"button\">Next</button>\r\n            </div>\r\n            <div class=\"form-section form-section-2\">\r\n                <label><span>Job title <sup>*</sup></span>\r\n                    <input type=\"text\" name=\"job_title\" v-model=\"contact.job_title\" required>\r\n                </label>\r\n                <label><span>Company <sup>*</sup></span>\r\n                    <input type=\"text\" name=\"company_name\" v-model=\"contact.company_name\" required>\r\n                </label>\r\n                <label><span>Company type <sup>*</sup></span>\r\n                    <select name=\"company_type\" v-model=\"contact.company_type\" required>\r\n                        <option disabled=\"\" value=\"\">What kind of company is yours?</option>\r\n                        <option value=\"brand\">Brand, Retailer, Manufacturer or Online Shop</option>\r\n                        <option value=\"investor\">Investor, Family Office, Business Angel</option>\r\n                        <option value=\"media\">Media / Press / Journalism</option>\r\n                        <option value=\"institution\">Public Administration / Institution</option>\r\n                        <option value=\"research\">Research Institute, University, School</option>\r\n                        <option value=\"vendor\">Vendor / Supplier of Services for Innovation and e-Commerce</option>\r\n                        <option value=\"other\">Other</option>\r\n                    </select>\r\n                </label>\r\n                <button type=\"button\">Back</button>\r\n                <button type=\"button\">Next</button>\r\n            </div>\r\n            <div class=\"form-section form-section-3\">\r\n                <div class=\"tandcs\">\r\n                    <p>Dagorà Lifestyle Innovation Hub along with their strategic partners Netcomm Suisse, Loomish and the LifeStyle-Tech Competence Center\r\n                        are committed to protecting and respecting your privacy, and we’ll only use your personal information to administer your account and\r\n                        to provide the products and services you requested from us. From time to time, we would like to contact you about our products and services,\r\n                        as well as other content that may be of interest to you. If you consent to us contacting you for this purpose, please tick below to confirm:\r\n                    </p>\r\n                    <label>\r\n                        <input type=\"checkbox\" name=\"terms\" v-model=\"terms\" required><span>You accept and confirm <sup>*</sup></span>\r\n                    </label>\r\n                    <p>You can unsubscribe from these communications at any time. For more information on how to unsubscribe, our privacy practices,\r\n                        and how we are committed to protecting and respecting your privacy, please review our Privacy Policy. By clicking submit below,\r\n                        you consent to allow Dagorà and its strategic partners Netcomm Suisse, Loomish SA and the Lifestyle-Tech Competence Center to\r\n                        store and process the personal information submitted above to provide you the content requested.\r\n                    </p>\r\n                </div>\r\n                <button type=\"button\">Back</button>\r\n                <input type=\"submit\" value=\"Get your reports\" @click.prevent=\"handleSubmission()\" :disabled=\"formIsNotValid\" class=\"submit-button btn\">\r\n            </div>\r\n            <label class=\"code-box\"><span>Do you have a code for free access? Enter it here.</span>\r\n                <input type=\"text\" name=\"coupon_code\" v-model=\"coupon_code\">\r\n            </label>\r\n            <div class=\"form-indicator\">\r\n                <div class=\"form-indicator-item\"></div>\r\n                <div class=\"form-indicator-item\"></div>\r\n                <div class=\"form-indicator-item\"></div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'SingleReportView',\r\n    props: {\r\n        headline: String,\r\n        textarea: String,\r\n    },\r\n\r\n  data() {\r\n    return {\r\n      contact: {\r\n        first_name: '',\r\n        last_name: '',\r\n        email_address: '',\r\n        company_name: '',\r\n        company_type: '',\r\n        job_title: '',\r\n      },\r\n      terms: false,\r\n      coupon_code: '',\r\n      honeypot: '',\r\n    }\r\n  },\r\n  methods: {\r\n    handleSubmission: async function() {\r\n        if(this.honeypot !== \"\") return;\r\n        if( !this.contact.first_name || !this.contact.last_name \r\n        || !this.contact.email_address || !this.contact.company_name \r\n        || !this.contact.company_type || !this.terms) return;\r\n      \r\n        const url = `${this.rest_base}order-submission`;\r\n        const data = {\r\n            contact: this.contact,\r\n            coupon_code: this.coupon_code,\r\n            cartItems: this.$root.inCart,\r\n        };\r\n        const headers = {\r\n            credentials: \"same-origin\",\r\n            \"Content-Type\": \"application/json\",\r\n            \"X-WP-Nonce\": this.nonce,\r\n        };\r\n        fetch(url, { method: \"POST\", headers, body: JSON.stringify(data) })\r\n            .then((result) => result.json())\r\n            .then((result) => { \r\n                if(result.status === 'success') {\r\n                    this.$root.inCart = [];\r\n                    this.$root.ref = result.order_id;\r\n                    this.$router.push({ name: 'thank-you' });\r\n                }\r\n                if(result.status === 'error') {\r\n                    alert(result.message);\r\n                }\r\n                if(result.status === 'stripe') {\r\n                    window.location.href = result.url;\r\n                }\r\n             });\r\n    },\r\n  },\r\n  computed: {\r\n    formIsNotValid: function() {\r\n      return this.honeypot !== \"\" || !this.contact.first_name || !this.contact.last_name || !this.contact.email_address || !this.contact.company_name || !this.contact.company_type || !this.terms;\r\n    }\r\n  }\r\n}\r\n\r\n</script>"],"mappings":";AA0EA;EACAA,IAAA;EACAC,KAAA;IACAC,QAAA,EAAAC,MAAA;IACAC,QAAA,EAAAD;EACA;EAEAE,KAAA;IACA;MACAC,OAAA;QACAC,UAAA;QACAC,SAAA;QACAC,aAAA;QACAC,YAAA;QACAC,YAAA;QACAC,SAAA;MACA;MACAC,KAAA;MACAC,WAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,gBAAA,iBAAAA,CAAA;MACA,SAAAF,QAAA;MACA,UAAAT,OAAA,CAAAC,UAAA,UAAAD,OAAA,CAAAE,SAAA,IACA,MAAAF,OAAA,CAAAG,aAAA,UAAAH,OAAA,CAAAI,YAAA,IACA,MAAAJ,OAAA,CAAAK,YAAA,UAAAE,KAAA;MAEA,MAAAK,GAAA,WAAAC,SAAA;MACA,MAAAd,IAAA;QACAC,OAAA,OAAAA,OAAA;QACAQ,WAAA,OAAAA,WAAA;QACAM,SAAA,OAAAC,KAAA,CAAAC;MACA;MACA,MAAAC,OAAA;QACAC,WAAA;QACA;QACA,mBAAAC;MACA;MACAC,KAAA,CAAAR,GAAA;QAAAS,MAAA;QAAAJ,OAAA;QAAAK,IAAA,EAAAC,IAAA,CAAAC,SAAA,CAAAzB,IAAA;MAAA,GACA0B,IAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,IAAA,IACAF,IAAA,CAAAC,MAAA;QACA,IAAAA,MAAA,CAAAE,MAAA;UACA,KAAAb,KAAA,CAAAC,MAAA;UACA,KAAAD,KAAA,CAAAc,GAAA,GAAAH,MAAA,CAAAI,QAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;YAAAtC,IAAA;UAAA;QACA;QACA,IAAAgC,MAAA,CAAAE,MAAA;UACAK,KAAA,CAAAP,MAAA,CAAAQ,OAAA;QACA;QACA,IAAAR,MAAA,CAAAE,MAAA;UACAO,MAAA,CAAAC,QAAA,CAAAC,IAAA,GAAAX,MAAA,CAAAd,GAAA;QACA;MACA;IACA;EACA;EACA0B,QAAA;IACAC,cAAA,WAAAA,CAAA;MACA,YAAA9B,QAAA,iBAAAT,OAAA,CAAAC,UAAA,UAAAD,OAAA,CAAAE,SAAA,UAAAF,OAAA,CAAAG,aAAA,UAAAH,OAAA,CAAAI,YAAA,UAAAJ,OAAA,CAAAK,YAAA,UAAAE,KAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}