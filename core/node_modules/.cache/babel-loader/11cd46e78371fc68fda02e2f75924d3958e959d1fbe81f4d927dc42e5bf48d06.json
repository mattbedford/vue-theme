{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport TeaserForm from '@/components/TeasrForm.vue';\nexport default {\n  name: 'SingleReportView',\n  components: {\n    TeaserForm\n  },\n  data() {\n    return {\n      showForm: false,\n      report: []\n    };\n  },\n  created() {\n    this.getSingleReport();\n  },\n  methods: {\n    getSingleReport: async function () {\n      this.report = [];\n      const url = `${this.rest_base}single-report/${this.$route.params.slug}`;\n      const headers = {\n        credentials: 'same-origin',\n        'Content-Type': 'application/json',\n        'X-WP-Nonce': this.nonce\n      };\n      fetch(url, {\n        method: 'GET',\n        headers\n      }).then(result => result.json()).then(result => {\n        if (result[0] == 'error') this.$router.push('/404');\n        this.report = result;\n      }).catch(error => {\n        console.log(error);\n        this.$router.push('/404');\n      });\n    },\n    addToCart(reportId) {\n      this.$emit('addToCart', reportId);\n    },\n    removeFromCart(reportId) {\n      this.$emit('removeFromCart', reportId);\n    },\n    calcCHF(price) {\n      return `CHF ${parseFloat(price).toFixed(2)}`;\n    }\n  }\n};","map":{"version":3,"names":["TeaserForm","name","components","data","showForm","report","created","getSingleReport","methods","url","rest_base","$route","params","slug","headers","credentials","nonce","fetch","method","then","result","json","$router","push","catch","error","console","log","addToCart","reportId","$emit","removeFromCart","calcCHF","price","parseFloat","toFixed"],"sources":["src/views/SingleReportView.vue"],"sourcesContent":["<template>\r\n    <div class=\"single-report page-wrap\" :class=\"report.id\">\r\n        <section class=\"section1\">\r\n            <TeaserForm class=\"teaser-form\" v-if=\"showForm\" headline=\"Download this report for free\" :reportName=\"report.title\" :teaserId=\"report.id\"></TeaserForm>\r\n            <div v-else class=\"col col1\">\r\n                <img :src=\"report.cover_image\">\r\n            </div>\r\n            <div class=\"col col2\">\r\n                <router-link :to=\"{name: 'reports'}\">\r\n                    <button class=\"back-to\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"ionicon\" viewBox=\"0 0 512 512\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"48\" d=\"M244 400 100 256l144-144M120 256h292\"/></svg>\r\n                        Back to reports\r\n                    </button>\r\n                </router-link>\r\n                <h1 v-html=\"report.title\"></h1>\r\n                <h4 v-if=\"report.release_date && report.release_date !== ''\" v-html=\"`Released: ${report.release_date}`\"></h4>\r\n                <h4 class=\"single-report-price\" v-html=\"calcCHF(report.price)\"></h4>\r\n                <div class=\"description\" v-html=\"report.long_desc\"></div>\r\n                <div class=\"btns\" style=\"display:flex;\">\r\n                    <button v-if=\"$root.inCart.includes(report.id)\" class=\"btn bad\" @click=\"removeFromCart(report.id)\">Remove from cart</button>\r\n                    <button v-else class=\"btn\" @click=\"addToCart(report.id)\">Add to cart</button>\r\n                    <button class=\"btn\" v-if=\"report.teaser_file\" @click=\"showForm = !showForm\">\r\n                      <span v-if=\"!showForm\">Download preview</span>\r\n                      <span v-else>&#x2715;</span>\r\n                    </button>\r\n                    <a href=\"https://share.hsforms.com/1yo5Ig5LhSoSyq3qUkX7bVw4m7jf\" target=\"_blank\">\r\n                      <button class=\"btn green\">Join Dagor√† - Free download</button>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TeaserForm from '@/components/TeasrForm.vue';\r\n\r\nexport default {\r\n  name: 'SingleReportView',\r\n  components: {\r\n    TeaserForm,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      showForm: false,\r\n      report: [],\r\n    }\r\n  },\r\n  created() {\r\n    this.getSingleReport();\r\n  },\r\n  methods: {\r\n    getSingleReport: async function() {\r\n      this.report = [];\r\n      const url = `${this.rest_base}single-report/${this.$route.params.slug}`;\r\n      const headers = {\r\n        credentials: 'same-origin',\r\n        'Content-Type': 'application/json',\r\n        'X-WP-Nonce': this.nonce,\r\n      };\r\n      fetch(url, { method: 'GET', headers })\r\n        .then((result) => result.json())\r\n        .then((result) => { \r\n          if(result[0] == 'error') this.$router.push('/404');\r\n          this.report = result; \r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n          this.$router.push('/404')\r\n            });\r\n    },\r\n    addToCart(reportId) {\r\n      this.$emit('addToCart', reportId);\r\n    },\r\n    removeFromCart(reportId) {\r\n      this.$emit('removeFromCart', reportId);\r\n    },\r\n    calcCHF(price) {\r\n      return `CHF ${parseFloat(price).toFixed(2)}`;\r\n    },\r\n  }\r\n}\r\n\r\n</script>"],"mappings":";AAmCA,OAAAA,UAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EAEAG,KAAA;IACA;MACAC,QAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAD,eAAA,iBAAAA,CAAA;MACA,KAAAF,MAAA;MACA,MAAAI,GAAA,WAAAC,SAAA,sBAAAC,MAAA,CAAAC,MAAA,CAAAC,IAAA;MACA,MAAAC,OAAA;QACAC,WAAA;QACA;QACA,mBAAAC;MACA;MACAC,KAAA,CAAAR,GAAA;QAAAS,MAAA;QAAAJ;MAAA,GACAK,IAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,IAAA,IACAF,IAAA,CAAAC,MAAA;QACA,IAAAA,MAAA,qBAAAE,OAAA,CAAAC,IAAA;QACA,KAAAlB,MAAA,GAAAe,MAAA;MACA,GACAI,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;QACA,KAAAH,OAAA,CAAAC,IAAA;MACA;IACA;IACAK,UAAAC,QAAA;MACA,KAAAC,KAAA,cAAAD,QAAA;IACA;IACAE,eAAAF,QAAA;MACA,KAAAC,KAAA,mBAAAD,QAAA;IACA;IACAG,QAAAC,KAAA;MACA,cAAAC,UAAA,CAAAD,KAAA,EAAAE,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}