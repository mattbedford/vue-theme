{"ast":null,"code":"export default {\n  name: 'HomeView',\n  data() {\n    return {\n      page: {\n        headline1: '',\n        textarea1: '',\n        image1: '',\n        headline2: '',\n        textarea2: null,\n        image2: '',\n        cta: '',\n        externalLink: null\n      },\n      reports: [],\n      token: null\n    };\n  },\n  mounted() {\n    this.getPage();\n    this.getReports();\n  },\n  computed: {\n    filteredReports() {\n      let tempReports = this.reports;\n      if (this.token) {\n        tempReports = tempReports.filter(item => {\n          return item.tags.includes(token);\n        });\n      }\n      return tempReports;\n    }\n  },\n  methods: {\n    async getReports() {\n      this.reports = [];\n      const url = `${this.rest_base}get-reports`;\n      const headers = {\n        credentials: 'same-origin',\n        'Content-Type': 'application/json',\n        'X-WP-Nonce': this.nonce\n      };\n      fetch(url, {\n        method: 'GET',\n        headers\n      }).then(result => result.json()).then(result => {\n        this.reports = result;\n      });\n    },\n    async getPage() {\n      const url = `${this.rest_base}get-page`;\n      const data = {\n        slug: 'reports'\n      };\n      const headers = {\n        credentials: 'same-origin',\n        'Content-Type': 'application/json',\n        'X-WP-Nonce': this.nonce\n      };\n      fetch(url, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(data)\n      }).then(result => result.json()).then(result => {\n        this.page = result;\n      });\n    },\n    addToCart(reportId) {\n      this.$emit('addToCart', reportId);\n    },\n    removeFromCart(reportId) {\n      this.$emit('removeFromCart', reportId);\n    },\n    calcCHF(price) {\n      return `CHF ${parseFloat(price).toFixed(2)}`;\n    }\n  }\n};","map":{"version":3,"names":["name","data","page","headline1","textarea1","image1","headline2","textarea2","image2","cta","externalLink","reports","token","mounted","getPage","getReports","computed","filteredReports","tempReports","filter","item","tags","includes","methods","url","rest_base","headers","credentials","nonce","fetch","method","then","result","json","slug","body","JSON","stringify","addToCart","reportId","$emit","removeFromCart","calcCHF","price","parseFloat","toFixed"],"sources":["src/views/ReportsView.vue"],"sourcesContent":["<template>\r\n    <div class=\"reports page-wrap\">\r\n      <section class=\"section1\">\r\n        <div class=\"reports-header\">\r\n          <h1 class=\"section-title\">{{ page.headline1 }}</h1>\r\n        </div>\r\n\r\n        <div class=\"tags\">\r\n            <span @click=\"token = 'luxury'\">Luxury</span>\r\n            <span @click=\"token = 'travel'\">Travel</span>\r\n            <span @click=\"token = 'retail'\">Retail</span>\r\n            <span @click=\"token = 'food'\">Food</span>\r\n            <span @click=\"token = 'design-furniture'\">Design & furniture</span>\r\n            <span  @click=\"token = 'fashion'\">Fashion</span>\r\n            <span  @click=\"token = 'electronics'\">Electronics</span>\r\n        </div>\r\n\r\n        <div id=\"reports-section\" class=\"container\">\r\n          <div class=\"list-reports\">\r\n            <div class=\"report\" v-for=\"report in filteredReports\" :key=\"report.id\">\r\n              <router-link :to=\"{name: 'report' , params:{ slug: report.slug }}\">\r\n                <div class=\"report-img\">\r\n                  <span class=\"home-report-price\" v-html=\"calcCHF(report.price)\"></span>\r\n                  <img :src=\"report.cover_image\" alt=\"\">\r\n                </div>\r\n              </router-link>\r\n              <div class=\"report-content\">\r\n                <h3>{{ report.title }}</h3>\r\n                <p>{{ report.short_desc }}</p>\r\n                <div class=\"btns\">\r\n                  <router-link :to=\"{name: 'report' , params:{ slug: report.slug }}\" class=\"btn\">Learn more</router-link>\r\n                  <button v-if=\"$root.inCart.includes(report.id)\" class=\"btn bad\" @click=\"removeFromCart(report.id)\">Remove from cart</button>\r\n                  <button v-else class=\"btn\" @click=\"addToCart(report.id)\">Add to cart</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'HomeView',\r\n  \r\n    data() {\r\n      return {\r\n        page: {\r\n          headline1: '',\r\n          textarea1: '',\r\n          image1: '',\r\n          headline2: '',\r\n          textarea2: null,\r\n          image2: '',\r\n          cta: '',\r\n          externalLink: null,\r\n        },\r\n        reports: [],\r\n        token: null,\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getPage();\r\n      this.getReports();\r\n    },\r\n    computed: {\r\n        filteredReports() {\r\n            let tempReports = this.reports\r\n            \r\n            if(this.token) {\r\n                tempReports = tempReports.filter((item) => {\r\n                    return item.tags.includes(token)\r\n                })\r\n            }            \r\n            return tempReports;\r\n        },       \r\n    },\r\n    methods: {\r\n      async getReports() {\r\n        this.reports = [];\r\n        const url = `${this.rest_base}get-reports`;\r\n        const headers = {\r\n          credentials: 'same-origin',\r\n          'Content-Type': 'application/json',\r\n          'X-WP-Nonce': this.nonce,\r\n        };\r\n        fetch(url, { method: 'GET', headers })\r\n          .then((result) => result.json())\r\n          .then((result) => { this.reports = result; });\r\n      },\r\n      async getPage() {\r\n        const url = `${this.rest_base}get-page`;\r\n        const data = { slug: 'reports' };\r\n        const headers = {\r\n          credentials: 'same-origin',\r\n          'Content-Type': 'application/json',\r\n          'X-WP-Nonce': this.nonce,\r\n        };\r\n        fetch(url, { method: 'POST', headers, body: JSON.stringify(data) })\r\n          .then((result) => result.json())\r\n          .then((result) => { this.page = result; });\r\n      },\r\n      addToCart(reportId) {\r\n        this.$emit('addToCart', reportId);\r\n      },\r\n      removeFromCart(reportId) {\r\n        this.$emit('removeFromCart', reportId);\r\n      },\r\n      calcCHF(price) {\r\n        return `CHF ${parseFloat(price).toFixed(2)}`;\r\n      },\r\n    },\r\n  }\r\n  </script>\r\n  "],"mappings":"AA2CA;EACAA,IAAA;EAEAC,KAAA;IACA;MACAC,IAAA;QACAC,SAAA;QACAC,SAAA;QACAC,MAAA;QACAC,SAAA;QACAC,SAAA;QACAC,MAAA;QACAC,GAAA;QACAC,YAAA;MACA;MACAC,OAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;IACA,KAAAC,UAAA;EACA;EACAC,QAAA;IACAC,gBAAA;MACA,IAAAC,WAAA,QAAAP,OAAA;MAEA,SAAAC,KAAA;QACAM,WAAA,GAAAA,WAAA,CAAAC,MAAA,CAAAC,IAAA;UACA,OAAAA,IAAA,CAAAC,IAAA,CAAAC,QAAA,CAAAV,KAAA;QACA;MACA;MACA,OAAAM,WAAA;IACA;EACA;EACAK,OAAA;IACA,MAAAR,WAAA;MACA,KAAAJ,OAAA;MACA,MAAAa,GAAA,WAAAC,SAAA;MACA,MAAAC,OAAA;QACAC,WAAA;QACA;QACA,mBAAAC;MACA;MACAC,KAAA,CAAAL,GAAA;QAAAM,MAAA;QAAAJ;MAAA,GACAK,IAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,IAAA,IACAF,IAAA,CAAAC,MAAA;QAAA,KAAArB,OAAA,GAAAqB,MAAA;MAAA;IACA;IACA,MAAAlB,QAAA;MACA,MAAAU,GAAA,WAAAC,SAAA;MACA,MAAAxB,IAAA;QAAAiC,IAAA;MAAA;MACA,MAAAR,OAAA;QACAC,WAAA;QACA;QACA,mBAAAC;MACA;MACAC,KAAA,CAAAL,GAAA;QAAAM,MAAA;QAAAJ,OAAA;QAAAS,IAAA,EAAAC,IAAA,CAAAC,SAAA,CAAApC,IAAA;MAAA,GACA8B,IAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,IAAA,IACAF,IAAA,CAAAC,MAAA;QAAA,KAAA9B,IAAA,GAAA8B,MAAA;MAAA;IACA;IACAM,UAAAC,QAAA;MACA,KAAAC,KAAA,cAAAD,QAAA;IACA;IACAE,eAAAF,QAAA;MACA,KAAAC,KAAA,mBAAAD,QAAA;IACA;IACAG,QAAAC,KAAA;MACA,cAAAC,UAAA,CAAAD,KAAA,EAAAE,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}